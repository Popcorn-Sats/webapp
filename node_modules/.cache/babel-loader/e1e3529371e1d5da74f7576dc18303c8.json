{"ast":null,"code":"var _jsxFileName = \"/Users/Zane/bitcoinprojects/luca/5_React/src/components/Transaction.js\";\nimport React from 'react';\nimport { EditIcon, MenuIcon } from '../icons';\nimport Server from '../utils/server';\nimport { TableCell, TableRow, Button, Input } from '@windmill/react-ui';\nexport class Transaction extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editView: false,\n      transaction: this.props.transaction,\n      savedTransaction: this.props.savedTransaction\n    };\n    this.onEditButtonClicked = this.onEditButtonClicked.bind(this);\n    this.onSubmitButtonClicked = this.onSubmitButtonClicked.bind(this);\n    this.cancelEdit = this.cancelEdit.bind(this);\n    this.updatePayee = this.updatePayee.bind(this);\n    this.updateDescription = this.updateDescription.bind(this);\n    this.updateCategory = this.updateCategory.bind(this);\n  }\n\n  hasAllRequiredFields() {\n    const transaction = this.state.transaction;\n\n    if (!transaction.payee || !transaction.category) {\n      return false;\n    }\n\n    return true;\n  }\n\n  hasChanges() {\n    const transaction = this.state.transaction;\n    const savedTransaction = this.state.savedTransaction;\n\n    if (!savedTransaction) {\n      return false;\n    }\n\n    if (transaction.payee === savedTransaction.payee && transaction.description === savedTransaction.description && transaction.category === savedTransaction.category) {\n      return false;\n    }\n\n    return true;\n  }\n\n  onEditButtonClicked() {\n    this.setState({\n      editView: !this.state.editView\n    });\n  }\n\n  updatePayee(event) {\n    const transaction = JSON.parse(JSON.stringify(this.state.transaction));\n    transaction.payee = event.target.value;\n    this.setState({\n      transaction: transaction\n    });\n    console.log(this.state.transaction.payee);\n  }\n\n  updateDescription(event) {\n    const transaction = JSON.parse(JSON.stringify(this.state.transaction));\n    transaction.description = event.target.value;\n    this.setState({\n      transaction: transaction\n    });\n  }\n\n  updateCategory(event) {\n    const transaction = JSON.parse(JSON.stringify(this.state.transaction));\n    transaction.category = event.target.value;\n    this.setState({\n      transaction: transaction\n    });\n  }\n\n  cancelEdit() {\n    this.setState({\n      transaction: this.state.savedTransaction,\n      editView: !this.state.editView\n    });\n  }\n\n  onSubmitButtonClicked() {\n    Server.editTransaction(JSON.parse(JSON.stringify(this.state.transaction))).then(transaction => {\n      this.setState({\n        savedTransaction: this.state.transaction,\n        editView: !this.state.editView\n      });\n    });\n  }\n\n  renderButtons() {\n    let saveButton, cancelButton, deleteButton;\n\n    if (this.hasChanges() && this.hasAllRequiredFields()) {\n      saveButton = /*#__PURE__*/React.createElement(Button, {\n        \"aria-label\": \"Delete\",\n        block: true,\n        size: \"small\",\n        onClick: this.onSubmitButtonClicked,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 20\n        }\n      }, \"Save\");\n    } else {\n      saveButton = /*#__PURE__*/React.createElement(Button, {\n        disabled: true,\n        \"aria-label\": \"Delete\",\n        block: true,\n        size: \"small\",\n        onClick: this.onSubmitButtonClicked,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 20\n        }\n      }, \"Save\");\n    }\n\n    if (this.hasChanges()) {\n      // Note: need to revert state on cancel\n      cancelButton = /*#__PURE__*/React.createElement(Button, {\n        layout: \"outline\",\n        \"aria-label\": \"Cancel\",\n        onClick: this.cancelEdit,\n        block: true,\n        size: \"small\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 22\n        }\n      }, \"Cancel\");\n    } else {\n      cancelButton = /*#__PURE__*/React.createElement(Button, {\n        layout: \"outline\",\n        \"aria-label\": \"Cancel\",\n        onClick: this.onEditButtonClicked,\n        block: true,\n        size: \"small\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 22\n        }\n      }, \"Cancel\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex items-center space-x-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, saveButton, cancelButton);\n  }\n\n  render() {\n    const editClicked = this.state.editView;\n\n    if (editClicked) {\n      return /*#__PURE__*/React.createElement(TableRow, {\n        key: this.props.transaction.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }\n      }, new Date(this.state.transaction.block.date).toLocaleDateString())), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        className: \"text-sm\",\n        value: this.state.transaction.payee,\n        onChange: this.updatePayee,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        className: \"text-sm\",\n        value: this.state.transaction.description,\n        onChange: this.updateDescription,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        className: \"text-sm\",\n        value: this.state.transaction.category.name,\n        onChange: this.updateCategory,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }\n      }, this.props.transaction.balance_change, \" sats\")), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }\n      }, this.props.transaction.network_fee, \" sats\")), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }\n      }, this.renderButtons()));\n    }\n\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: this.props.transaction.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, \"//\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    }, this.state.transaction.block.date\n    /*new Date(this.state.transaction.block.date).toLocaleDateString()*/\n    )), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }\n    }, this.state.transaction.payee)), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, this.state.transaction.description)), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }\n    }, \" \", this.state.transaction.category.name)), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }\n    }, this.props.transaction.balance_change, \" sats\")), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }, this.props.transaction.network_fee, \" sats\")), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex items-center space-x-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      layout: \"link\",\n      size: \"icon\",\n      \"aria-label\": \"Edit\",\n      onClick: this.onEditButtonClicked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(EditIcon, {\n      className: \"w-5 h-5\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      layout: \"link\",\n      size: \"icon\",\n      \"aria-label\": \"Delete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MenuIcon, {\n      className: \"w-5 h-5\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    })))));\n  }\n\n} // export default Transaction","map":{"version":3,"sources":["/Users/Zane/bitcoinprojects/luca/5_React/src/components/Transaction.js"],"names":["React","EditIcon","MenuIcon","Server","TableCell","TableRow","Button","Input","Transaction","Component","constructor","props","state","editView","transaction","savedTransaction","onEditButtonClicked","bind","onSubmitButtonClicked","cancelEdit","updatePayee","updateDescription","updateCategory","hasAllRequiredFields","payee","category","hasChanges","description","setState","event","JSON","parse","stringify","target","value","console","log","editTransaction","then","renderButtons","saveButton","cancelButton","deleteButton","render","editClicked","id","Date","block","date","toLocaleDateString","name","balance_change","network_fee"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { EditIcon, MenuIcon } from '../icons'\nimport Server from '../utils/server'\n\nimport {\n    TableCell,\n    TableRow,\n    Button,\n    Input,\n  } from '@windmill/react-ui'\n\nexport class Transaction extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      editView: false,\n      transaction: this.props.transaction,\n      savedTransaction: this.props.savedTransaction\n    }\n    this.onEditButtonClicked = this.onEditButtonClicked.bind(this)\n    this.onSubmitButtonClicked = this.onSubmitButtonClicked.bind(this)\n    this.cancelEdit = this.cancelEdit.bind(this)\n\n    this.updatePayee = this.updatePayee.bind(this);\n    this.updateDescription = this.updateDescription.bind(this);\n    this.updateCategory = this.updateCategory.bind(this);\n  }\n\n  hasAllRequiredFields() {\n    const transaction = this.state.transaction;\n    if (!transaction.payee || !transaction.category) {\n      return false;\n    }\n    return true;\n  }\n\n  hasChanges() {\n    const transaction = this.state.transaction;\n    const savedTransaction = this.state.savedTransaction;\n    if (!savedTransaction) {\n      return false;\n    }\n\n    if (transaction.payee === savedTransaction.payee &&\n        transaction.description === savedTransaction.description &&\n        transaction.category === savedTransaction.category) {\n      return false;\n    }\n\n    return true;\n  }\n\n  onEditButtonClicked(){\n    this.setState({\n      editView: !this.state.editView\n    })\n  }\n\n  updatePayee(event) {\n    const transaction = JSON.parse(JSON.stringify(this.state.transaction))\n    transaction.payee = event.target.value\n    this.setState({transaction: transaction})\n    console.log(this.state.transaction.payee)\n  }\n\n  updateDescription(event) {\n    const transaction = JSON.parse(JSON.stringify(this.state.transaction))\n    transaction.description = event.target.value\n    this.setState({transaction: transaction})\n  }\n\n  updateCategory(event) {\n    const transaction = JSON.parse(JSON.stringify(this.state.transaction))\n    transaction.category = event.target.value\n    this.setState({transaction: transaction})\n  }\n\n  cancelEdit() {\n    this.setState({\n      transaction: this.state.savedTransaction,\n      editView: !this.state.editView\n    })\n  }\n\n  onSubmitButtonClicked() {\n    Server.editTransaction(JSON.parse(JSON.stringify(this.state.transaction))).then(transaction => {\n      this.setState({\n        savedTransaction: this.state.transaction,\n        editView: !this.state.editView\n      })\n    })\n  }\n\n  renderButtons() {\n    let saveButton, cancelButton, deleteButton\n\n    if (this.hasChanges() && this.hasAllRequiredFields()){\n      saveButton = <Button aria-label=\"Delete\" block size=\"small\" onClick={this.onSubmitButtonClicked}>Save</Button>\n    } else {\n      saveButton = <Button disabled aria-label=\"Delete\" block size=\"small\" onClick={this.onSubmitButtonClicked}>Save</Button>\n    }\n\n    if (this.hasChanges()) {\n      // Note: need to revert state on cancel\n      cancelButton = <Button layout=\"outline\" aria-label=\"Cancel\" onClick={this.cancelEdit} block size=\"small\">Cancel</Button>\n    } else {\n      cancelButton = <Button layout=\"outline\" aria-label=\"Cancel\" onClick={this.onEditButtonClicked} block size=\"small\">Cancel</Button>\n    }\n\n    return (\n      <div className=\"flex items-center space-x-4\">\n        {saveButton}\n        {cancelButton}\n      </div>\n    )\n  }\n\n  render() {\n    const editClicked = this.state.editView\n\n    if (editClicked) {\n      return (\n        <TableRow key={this.props.transaction.id}>\n          <TableCell>\n            <span className=\"text-sm\">{new Date(this.state.transaction.block.date).toLocaleDateString()}</span>\n          </TableCell>\n          <TableCell>\n            <Input \n              className=\"text-sm\"\n              value={this.state.transaction.payee}\n              onChange={this.updatePayee}\n            />\n          </TableCell>\n          <TableCell>\n            <Input \n              className=\"text-sm\"\n              value={this.state.transaction.description}\n              onChange={this.updateDescription}\n            />\n          </TableCell>\n          <TableCell>\n            <Input \n              className=\"text-sm\"\n              value={this.state.transaction.category.name}\n              onChange={this.updateCategory}\n            />\n          </TableCell>\n          <TableCell>\n            <span className=\"text-sm\">{this.props.transaction.balance_change} sats</span>\n          </TableCell>\n          <TableCell>\n            <span className=\"text-sm\">{this.props.transaction.network_fee} sats</span>\n          </TableCell>\n          <TableCell>\n            {this.renderButtons()}\n          </TableCell>\n        </TableRow>\n      )\n    }\n\n    return (\n      <TableRow key={this.props.transaction.id}>\n          <TableCell>\n            //<span className=\"text-sm\">{this.state.transaction.block.date/*new Date(this.state.transaction.block.date).toLocaleDateString()*/}</span>\n          </TableCell>\n          <TableCell>\n            <p className=\"text-sm\">{this.state.transaction.payee}</p>\n          </TableCell>\n          <TableCell>\n            <p className=\"text-sm\">{this.state.transaction.description}</p>\n          </TableCell>\n          <TableCell>\n            <span className=\"text-sm\"> {this.state.transaction.category.name}</span>\n          </TableCell>\n          <TableCell>\n            <span className=\"text-sm\">{this.props.transaction.balance_change} sats</span>\n          </TableCell>\n          <TableCell>\n            <span className=\"text-sm\">{this.props.transaction.network_fee} sats</span>\n          </TableCell>\n          <TableCell>\n            <div className=\"flex items-center space-x-4\">\n              <Button layout=\"link\" size=\"icon\" aria-label=\"Edit\" onClick={this.onEditButtonClicked}>\n                <EditIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\n              </Button>\n              <Button layout=\"link\" size=\"icon\" aria-label=\"Delete\">\n                <MenuIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\n              </Button>\n            </div>\n          </TableCell>\n        </TableRow>\n      )\n  }\n}\n\n// export default Transaction"]},"metadata":{},"sourceType":"module"}